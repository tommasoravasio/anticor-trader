# Anticor Trader

Anticor Trader is a set of Jupyter notebooks and Python modules implementing and evaluating the ANTI² strategy across multiple portfolios and synthetic market scenarios.

READ THE NOTES BEFORE TOUCHING THE CODE:
[Important Notes for Collaborators](./NOTES.md)

## Quick Start

- Ensure Python 3.10+ is available.
- Install dependencies: `pip install -r requirements.txt`.
- Create `wrds_credentials.txt` at the repo root with your WRDS credentials (username on first line, password on second).

## Project Layout

- `notebooks/00_algorithm_template.ipynb`: Core algorithm template (formerly V5_Optimized). Start here.
- `notebooks/backtests/`: Portfolio-specific backtests (formerly V51–V57). Each notebook runs the same algorithm on a different universe and writes results to `results/backtests/`.
    - `01_sp500_top25.ipynb`
    - `02_sp500_25diversified.ipynb`
    - `03_nyse_top25.ipynb`
    - `04_ma25.ipynb`
    - `05_etf25.ipynb`
    - `06_maximumfactors.ipynb`
    - `07_riskdiversified15.ipynb`
- `notebooks/synthetic_analysis/10_synthetic_analysis.ipynb`: Reporting and analysis of synthetic scenarios generated by `src/synthetic_data.py` and results in `results/synthetic/`.
- `src/`: Python modules
    - `persist_backtest.py`: Utilities to persist equity curves and summaries.
    - `synthetic_data.py`: Generates synthetic scenario data and metrics.
- `data/`: Input data (CSV, metadata) used by notebooks.
- `results/`: Outputs
    - `backtests/`: CSV equity curves and JSON summaries for each portfolio run.
    - `synthetic/`: Reports and metrics from synthetic scenarios.

## Running Backtests
1. Open any notebook in `notebooks/backtests/`.
2. Ensure `wrds_credentials.txt` exists in the repo root.
3. Run cells top-to-bottom. The notebook will:
     - Load data or fetch from WRDS
     - Execute the ANTI² strategy
     - Plot performance
     - Save outputs to `results/backtests/` (CSV and JSON)

## Analyzing Synthetic Scenarios
- Generate or review synthetic datasets via `src/synthetic_data.py` (see `results/synthetic/data/`).
- Open `notebooks/synthetic_analysis/10_synthetic_analysis.ipynb` to analyze scenario performance and summaries in `results/synthetic/`.

## Conventions
- Numbered notebooks reflect logical order: `00` template → `01-07` backtests → `10` synthetic analysis.
- Notebooks use `from src.persist_backtest import save_backtest_results` for standardized persistence.
- Backtest notebooks reference WRDS credentials relative to their folder; keep `wrds_credentials.txt` at the repo root.

## Common Tasks
- Create a new portfolio run: duplicate `00_algorithm_template.ipynb` into `notebooks/backtests/`, adjust portfolio selection logic, and run.
- Compare results: load CSVs/JSONs in `results/backtests/` or use the synthetic analysis notebook for aggregated views.

## Setup Notes
- Dependencies are listed in `requirements.txt`.
- If using environment variables or `.env`, ensure paths resolve from notebook locations.

## Troubleshooting
- Import errors: confirm you opened VS Code in the repo root so `src/` is importable.
- File not found: verify relative paths from the notebook location (e.g., backtests use `../../wrds_credentials.txt`).
